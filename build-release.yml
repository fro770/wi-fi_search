name: Build and Release

on:
  push:
    tags:
      - 'v*'
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    
    - name: Create APK
      run: |
        mkdir -p apps/
        # –°–æ–∑–¥–∞–µ–º dummy APK
        echo "Creating dummy APK..."
        python3 create-dummy-apk.py
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä
        ls -lh apps/
    
    - name: Create Release
      uses: softprops/action-gh-release@v1
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        tag_name: ${{ github.ref }}
        name: WiFi Scanner ${{ github.ref_name }}
        body: |
          # üì∂ WiFi Password Scanner
          
          ## üì± APK –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
          - `wifi-scanner.apk` - Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ç—Ä–µ–±—É–µ—Ç root)
          
          ## üåê –í–µ–±-–≤–µ—Ä—Å–∏—è
          - `index.html` - –û—Å–Ω–æ–≤–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
          - `quick-start.html` - –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫
          
          ## ‚ö° –°–∫—Ä–∏–ø—Ç—ã
          - `termux-root.sh` - –î–ª—è Termux —Å root
          - `adb-backup-method.sh` - –î–ª—è –ü–ö —á–µ—Ä–µ–∑ ADB
          
          ## üì¶ –ü–æ–ª–Ω—ã–π –∞—Ä—Ö–∏–≤
          - `wifi-scanner.zip` - –í—Å–µ —Ñ–∞–π–ª—ã
          
          ### ‚ö†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
          - Android 4-9: root –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Ç–æ–¥–æ–≤
          - Android 10+: –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω root –¥–æ—Å—Ç—É–ø
          
          [–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è](README.md)
        files: |
          apps/wifi-password-extractor.apk
          index.html
          quick-start.html
          scripts/termux-root.sh
          wifi-scanner.zip
